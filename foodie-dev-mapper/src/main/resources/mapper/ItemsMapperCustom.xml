<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.imooc.mapper.ItemsMapperCustom" >

  <select id="queryItemComments" parameterType="map" resultType="com.imooc.pojo.vo.ItemCommentVO">
    SELECT
        ic.comment_level as commentLevel,
        ic.content as content,
        ic.sepc_name as specName,
        ic.created_time as createdTime,
        u.face as face,
        u.nickname as nickname
    FROM item_comments ic
    LEFT JOIN users u ON ic.user_id = u.id
    WHERE ic.item_id = #{params.itemId}
      <if test="params.commentLevel != null and params.commentLevel != ''">
          AND ic.comment_level = {params.commentLevel}
      </if>
  </select>

</mapper>